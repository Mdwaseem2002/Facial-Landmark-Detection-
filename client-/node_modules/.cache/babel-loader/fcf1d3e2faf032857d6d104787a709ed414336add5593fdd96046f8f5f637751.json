{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = {\n  id: \"facial-landmark-detection\"\n};\nconst _hoisted_2 = [\"disabled\"];\nconst _hoisted_3 = {\n  key: 0,\n  class: \"status\"\n};\nconst _hoisted_4 = {\n  key: 1,\n  ref: \"outputCanvas\",\n  width: \"600\",\n  height: \"400\"\n};\nconst _hoisted_5 = {\n  key: 2,\n  class: \"result-image-container\"\n};\nconst _hoisted_6 = [\"src\"];\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"footer\", null, [/*#__PURE__*/_createElementVNode(\"p\", null, \"Â© 2024 Facial Landmark Detection\")], -1 /* HOISTED */);\nexport function render(_ctx, _cache) {\n  const _component_HelloWorld = _resolveComponent(\"HelloWorld\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" ... (unchanged code) ... \"), _createElementVNode(\"main\", null, [_createElementVNode(\"table\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"td\", null, [_createElementVNode(\"input\", {\n    type: \"file\",\n    accept: \".jpg\",\n    onChange: _cache[0] || (_cache[0] = (...args) => _ctx.handleImageUpload && _ctx.handleImageUpload(...args))\n  }, null, 32 /* NEED_HYDRATION */)]), _createElementVNode(\"td\", null, [_createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = (...args) => _ctx.uploadImage && _ctx.uploadImage(...args))\n  }, \"Upload\")]), _createElementVNode(\"td\", null, [_createElementVNode(\"button\", {\n    onClick: _cache[2] || (_cache[2] = (...args) => _ctx.fetchResultImage && _ctx.fetchResultImage(...args)),\n    disabled: !_ctx.result\n  }, \" Fetch Result \", 8 /* PROPS */, _hoisted_2)])])]), _ctx.status !== null ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, _toDisplayString(_ctx.status), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _ctx.result ? (_openBlock(), _createElementBlock(\"canvas\", _hoisted_4, null, 512 /* NEED_PATCH */)) : _createCommentVNode(\"v-if\", true), _ctx.result ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_createCommentVNode(\" Display the fetched base64 image \"), _ctx.result.startsWith('data:image') ? (_openBlock(), _createElementBlock(\"img\", {\n    key: 0,\n    src: _ctx.result,\n    alt: \"Result Image\"\n  }, null, 8 /* PROPS */, _hoisted_6)) : _createCommentVNode(\"v-if\", true)])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Include HelloWorld.vue component \"), _createVNode(_component_HelloWorld)]), _hoisted_7]);\n}","map":{"version":3,"names":["id","key","class","ref","width","height","_createElementVNode","_createElementBlock","_hoisted_1","_createCommentVNode","type","accept","onChange","_cache","args","_ctx","handleImageUpload","onClick","uploadImage","fetchResultImage","disabled","result","_hoisted_2","status","_hoisted_3","_toDisplayString","_hoisted_4","_hoisted_5","startsWith","src","alt","_hoisted_6","_createVNode","_component_HelloWorld","_hoisted_7"],"sources":["/home/waseem/experiments/waseem-example-fullstack/client-/src/App.vue"],"sourcesContent":["<template>\n  <div id=\"facial-landmark-detection\">\n    <!-- ... (unchanged code) ... -->\n    <main>\n      <table>\n        <tr>\n          <td>\n            <input type=\"file\" accept=\".jpg\" @change=\"handleImageUpload\" />\n          </td>\n          <td>\n            <button @click=\"uploadImage\">Upload</button>\n          </td>\n          <td>\n            <button @click=\"fetchResultImage\" :disabled=\"!result\">\n              Fetch Result\n            </button>\n          </td>\n        </tr>\n      </table>\n\n      <div v-if=\"status !== null\" class=\"status\">\n        {{ status }}\n      </div>\n\n      <canvas v-if=\"result\" ref=\"outputCanvas\" width=\"600\" height=\"400\"></canvas>\n\n      <div v-if=\"result\" class=\"result-image-container\">\n        <!-- Display the fetched base64 image -->\n        <img v-if=\"result.startsWith('data:image')\" :src=\"result\" alt=\"Result Image\" />\n      </div>\n\n      <!-- Include HelloWorld.vue component -->\n      <HelloWorld />\n    </main>\n\n    <footer>\n      <p>&copy; 2024 Facial Landmark Detection</p>\n    </footer>\n  </div>\n</template>\n\n<script>\nimport HelloWorld from './App.vue'; // Import HelloWorld.vue\n\nexport default {\n  components: {\n    HelloWorld, // Register HelloWorld component\n  },\n  data() {\n    return {\n      status: null,\n      result: null,\n      imageFile: null,\n    };\n  },\n  methods: {\n    handleImageUpload(event) {\n      this.status = null;\n      this.result = null;\n      const input = event.target;\n      this.imageFile = input.files[0];\n    },\n    async uploadImage() {\n      if (!this.imageFile) {\n        this.status = \"Please select an image file.\";\n        return;\n      }\n\n      // Convert image to base64\n      const reader = new FileReader();\n      reader.onload = async () => {\n        const base64Data = reader.result.split(',')[1];\n        try {\n          const uploadResponse = await fetch(\"http://127.0.0.1:5000/\", {\n            method: \"POST\",\n            headers: {\n              \"Content-Type\": \"application/json\",\n            },\n            body: JSON.stringify({ image: base64Data }),\n          });\n\n          if (uploadResponse.ok) {\n            this.status = \"Image upload successful!\";\n            await this.fetchResultImage(); // Automatically fetch result after successful upload\n          } else {\n            this.status = \"Image upload failed. Please try again.\";\n          }\n        } catch (error) {\n          console.error(\"Error uploading image:\", error);\n          this.status = \"Image upload failed. Please try again.\";\n        }\n      };\n\n      reader.readAsDataURL(this.imageFile);\n    },\n    async fetchResultImage() {\n      try {\n        const response = await fetch(\"http://127.0.0.1:5000/\");\n        if (response.ok) {\n          const resultImageData = await response.text();\n          this.result = data:image/jpeg;base64,${resultImageData};\n          this.drawLandmarks();\n        } else {\n          this.status = \"Error fetching result image.\";\n        }\n      } catch (error) {\n        console.error(\"Error fetching result image:\", error);\n        this.status = \"Error fetching result image. Please try again.\";\n      }\n    },\n    drawLandmarks() {\n      // Add code to draw facial landmarks on the canvas if needed\n    },\n  },\n};\n</script>\n\n<style>\n/* Add your CSS styling here */\nheader {\n  background-color: #333;\n  color: #fff;\n  text-align: center;\n  padding: 10px;\n}\n\nfooter {\n  background-color: #333;\n  color: #fff;\n  text-align: center;\n  padding: 10px;\n  position: fixed;\n  bottom: 0;\n  width: 100%;\n}\n\nmain {\n  margin: 20px;\n}\n\ntable {\n  margin-bottom: 20px;\n}\n\n.status {\n  margin-top: 10px;\n  padding: 10px;\n  border: 1px solid #ccc;\n  background-color: #f0f0f0;\n}\n\n.result-image-container {\n  margin-top: 20px;\n}\n\n.result-image-container img {\n  max-width: 100%;\n  height: auto;\n}\n</style>"],"mappings":";;EACOA,EAAE,EAAC;AAA2B;mBADrC;;EAAAC,GAAA;EAoBkCC,KAAK,EAAC;;;EApBxCD,GAAA;EAwB4BE,GAAG,EAAC,cAAc;EAACC,KAAK,EAAC,KAAK;EAACC,MAAM,EAAC;;;EAxBlEJ,GAAA;EA0ByBC,KAAK,EAAC;;mBA1B/B;gCAmCII,mBAAA,CAES,iB,aADPA,mBAAA,CAA4C,WAAzC,kCAAqC,E;;;uBAnC5CC,mBAAA,CAqCM,OArCNC,UAqCM,GApCJC,mBAAA,8BAAiC,EACjCH,mBAAA,CA8BO,eA7BLA,mBAAA,CAcQ,gBAbNA,mBAAA,CAYK,aAXHA,mBAAA,CAEK,aADHA,mBAAA,CAA+D;IAAxDI,IAAI,EAAC,MAAM;IAACC,MAAM,EAAC,MAAM;IAAEC,QAAM,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,IAAA,CAAAC,iBAAA,IAAAD,IAAA,CAAAC,iBAAA,IAAAF,IAAA,CAAiB;uCAE7DR,mBAAA,CAEK,aADHA,mBAAA,CAA4C;IAAnCW,OAAK,EAAAJ,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,IAAA,CAAAG,WAAA,IAAAH,IAAA,CAAAG,WAAA,IAAAJ,IAAA,CAAW;KAAE,QAAM,E,GAErCR,mBAAA,CAIK,aAHHA,mBAAA,CAES;IAFAW,OAAK,EAAAJ,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,IAAA,CAAAI,gBAAA,IAAAJ,IAAA,CAAAI,gBAAA,IAAAL,IAAA,CAAgB;IAAGM,QAAQ,GAAGL,IAAA,CAAAM;KAAQ,gBAEtD,iBAfZC,UAAA,E,OAoBiBP,IAAA,CAAAQ,MAAM,a,cAAjBhB,mBAAA,CAEM,OAFNiB,UAEM,EAAAC,gBAAA,CADDV,IAAA,CAAAQ,MAAM,oBArBjBd,mBAAA,gBAwBoBM,IAAA,CAAAM,MAAM,I,cAApBd,mBAAA,CAA2E,UAA3EmB,UAA2E,iCAxBjFjB,mBAAA,gBA0BiBM,IAAA,CAAAM,MAAM,I,cAAjBd,mBAAA,CAGM,OAHNoB,UAGM,GAFJlB,mBAAA,sCAAyC,EAC9BM,IAAA,CAAAM,MAAM,CAACO,UAAU,kB,cAA5BrB,mBAAA,CAA+E;IA5BvFN,GAAA;IA4BqD4B,GAAG,EAAEd,IAAA,CAAAM,MAAM;IAAES,GAAG,EAAC;0BA5BtEC,UAAA,KAAAtB,mBAAA,e,KAAAA,mBAAA,gBA+BMA,mBAAA,sCAAyC,EACzCuB,YAAA,CAAcC,qBAAA,E,GAGhBC,UAES,C"},"metadata":{},"sourceType":"module","externalDependencies":[]}