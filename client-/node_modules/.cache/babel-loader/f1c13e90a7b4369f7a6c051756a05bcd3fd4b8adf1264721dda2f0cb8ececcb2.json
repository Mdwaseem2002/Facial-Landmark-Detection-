{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = {\n  id: \"facial-landmark-detection\"\n};\nconst _hoisted_2 = {\n  class: \"green-layer\"\n};\nconst _hoisted_3 = {\n  class: \"image-box-short\"\n};\nconst _hoisted_4 = [\"src\"];\nconst _hoisted_5 = {\n  key: 0,\n  class: \"status\"\n};\nconst _hoisted_6 = {\n  key: 2,\n  ref: \"outputCanvas\",\n  width: \"400\",\n  height: \"300\"\n};\nconst _hoisted_7 = [\"src\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" ... (other template code) \"), _createElementVNode(\"main\", null, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"table\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"td\", null, [_createElementVNode(\"div\", _hoisted_3, [$data.imageFile ? (_openBlock(), _createElementBlock(\"img\", {\n    key: 0,\n    src: $options.imageFileURL,\n    alt: \"Uploaded Image\"\n  }, null, 8 /* PROPS */, _hoisted_4)) : _createCommentVNode(\"v-if\", true)]), _createCommentVNode(\" Use a single button for both upload and submit \"), _createElementVNode(\"input\", {\n    type: \"file\",\n    accept: \".jpg\",\n    onChange: _cache[0] || (_cache[0] = (...args) => $options.handleImageUpload && $options.handleImageUpload(...args))\n  }, null, 32 /* NEED_HYDRATION */), _createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.uploadAndSubmit && $options.uploadAndSubmit(...args))\n  }, \"Upload & Submit\")]), _createCommentVNode(\" ... (other table cells) \")])]), $data.status !== null ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, _toDisplayString($data.status), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), $data.result ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 1,\n    onClick: _cache[2] || (_cache[2] = (...args) => _ctx.showResult && _ctx.showResult(...args))\n  }, \"Show Result\")) : _createCommentVNode(\"v-if\", true), $data.result ? (_openBlock(), _createElementBlock(\"canvas\", _hoisted_6, null, 512 /* NEED_PATCH */)) : _createCommentVNode(\"v-if\", true), $data.resultImageURL ? (_openBlock(), _createElementBlock(\"img\", {\n    key: 3,\n    src: $data.resultImageURL,\n    alt: \"Result Image\"\n  }, null, 8 /* PROPS */, _hoisted_7)) : _createCommentVNode(\"v-if\", true)])]), _createCommentVNode(\" ... (other template code) \")]);\n}","map":{"version":3,"names":["id","class","key","ref","width","height","_createElementBlock","_hoisted_1","_createCommentVNode","_createElementVNode","_hoisted_2","_hoisted_3","$data","imageFile","src","$options","imageFileURL","alt","_hoisted_4","type","accept","onChange","_cache","args","handleImageUpload","onClick","uploadAndSubmit","status","_hoisted_5","_toDisplayString","result","_ctx","showResult","_hoisted_6","resultImageURL","_hoisted_7"],"sources":["/home/waseem/experiments/waseem-example-fullstack/client-/src/App.vue"],"sourcesContent":["<template>\n  <div id=\"facial-landmark-detection\">\n    <!-- ... (other template code) -->\n\n    <main>\n      <div class=\"green-layer\">\n        <table>\n          <tr>\n            <td>\n              <div class=\"image-box-short\">\n                <img v-if=\"imageFile\" :src=\"imageFileURL\" alt=\"Uploaded Image\" />\n              </div>\n              <!-- Use a single button for both upload and submit -->\n              <input type=\"file\" accept=\".jpg\" @change=\"handleImageUpload\" />\n              <button @click=\"uploadAndSubmit\">Upload & Submit</button>\n            </td>\n            <!-- ... (other table cells) -->\n          </tr>\n        </table>\n\n        <div v-if=\"status !== null\" class=\"status\">\n          {{ status }}\n        </div>\n\n        <button v-if=\"result\" @click=\"showResult\">Show Result</button>\n\n        <canvas v-if=\"result\" ref=\"outputCanvas\" width=\"400\" height=\"300\"></canvas>\n        <img v-if=\"resultImageURL\" :src=\"resultImageURL\" alt=\"Result Image\" />\n      </div>\n    </main>\n\n    <!-- ... (other template code) -->\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      status: null,\n      result: null,\n      resultImageURL: null,\n      imageFile: null,\n    };\n  },\n  computed: {\n    imageFileURL() {\n      return URL.createObjectURL(this.imageFile);\n    },\n  },\n  methods: {\n    handleImageUpload(event) {\n      this.status = null;\n      this.result = null;\n      this.resultImageURL = null;\n      const input = event.target;\n      this.imageFile = input.files[0];\n    },\n    async uploadAndSubmit() {\n      if (!this.imageFile) {\n        this.status = \"Please select an image file.\";\n        return;\n      }\n\n      const reader = new FileReader();\n      reader.onloadend = async () => {\n        try {\n          const formData = new FormData();\n          formData.append(\"image\", reader.result);\n\n          const response = await fetch(\"http://127.0.0.1:5000/\", {\n            method: \"POST\",\n            body: formData,\n          });\n\n          if (response.ok) {\n            this.status = \"Image upload successful!\";\n            const resultData = await response.json();\n            this.result = resultData;\n            this.drawLandmarks();\n          } else {\n            this.status = \"Image upload failed. Please try again.\";\n          }\n        } catch (error) {\n          console.error(\"Error uploading image:\", error);\n          this.status = \"Image upload failed. Please try again.\";\n        }\n      };\n      reader.readAsDataURL(this.imageFile);\n    },\n    // ... (other methods)\n  },\n};\n</script>\n\n<style>\n/* ... (your existing styles) */\n</style>"],"mappings":";;EACOA,EAAE,EAAC;AAA2B;;EAI1BC,KAAK,EAAC;AAAa;;EAIXA,KAAK,EAAC;AAAiB;mBAT1C;;EAAAC,GAAA;EAoBoCD,KAAK,EAAC;;;EApB1CC,GAAA;EA0B8BC,GAAG,EAAC,cAAc;EAACC,KAAK,EAAC,KAAK;EAACC,MAAM,EAAC;;mBA1BpE;;uBACEC,mBAAA,CA+BM,OA/BNC,UA+BM,GA9BJC,mBAAA,+BAAkC,EAElCC,mBAAA,CAyBO,eAxBLA,mBAAA,CAuBM,OAvBNC,UAuBM,GAtBJD,mBAAA,CAYQ,gBAXNA,mBAAA,CAUK,aATHA,mBAAA,CAOK,aANHA,mBAAA,CAEM,OAFNE,UAEM,GADOC,KAAA,CAAAC,SAAS,I,cAApBP,mBAAA,CAAiE;IAVjFJ,GAAA;IAUuCY,GAAG,EAAEC,QAAA,CAAAC,YAAY;IAAEC,GAAG,EAAC;0BAV9DC,UAAA,KAAAV,mBAAA,e,GAYcA,mBAAA,oDAAuD,EACvDC,mBAAA,CAA+D;IAAxDU,IAAI,EAAC,MAAM;IAACC,MAAM,EAAC,MAAM;IAAEC,QAAM,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAER,QAAA,CAAAS,iBAAA,IAAAT,QAAA,CAAAS,iBAAA,IAAAD,IAAA,CAAiB;qCAC3Dd,mBAAA,CAAyD;IAAhDgB,OAAK,EAAAH,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAER,QAAA,CAAAW,eAAA,IAAAX,QAAA,CAAAW,eAAA,IAAAH,IAAA,CAAe;KAAE,iBAAe,E,GAElDf,mBAAA,6BAAgC,C,KAIzBI,KAAA,CAAAe,MAAM,a,cAAjBrB,mBAAA,CAEM,OAFNsB,UAEM,EAAAC,gBAAA,CADDjB,KAAA,CAAAe,MAAM,oBArBnBnB,mBAAA,gBAwBsBI,KAAA,CAAAkB,MAAM,I,cAApBxB,mBAAA,CAA8D;IAxBtEJ,GAAA;IAwB+BuB,OAAK,EAAAH,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEQ,IAAA,CAAAC,UAAA,IAAAD,IAAA,CAAAC,UAAA,IAAAT,IAAA,CAAU;KAAE,aAAW,KAxB7Df,mBAAA,gBA0BsBI,KAAA,CAAAkB,MAAM,I,cAApBxB,mBAAA,CAA2E,UAA3E2B,UAA2E,iCA1BnFzB,mBAAA,gBA2BmBI,KAAA,CAAAsB,cAAc,I,cAAzB5B,mBAAA,CAAsE;IA3B9EJ,GAAA;IA2BoCY,GAAG,EAAEF,KAAA,CAAAsB,cAAc;IAAEjB,GAAG,EAAC;0BA3B7DkB,UAAA,KAAA3B,mBAAA,e,KA+BIA,mBAAA,+BAAkC,C"},"metadata":{},"sourceType":"module","externalDependencies":[]}