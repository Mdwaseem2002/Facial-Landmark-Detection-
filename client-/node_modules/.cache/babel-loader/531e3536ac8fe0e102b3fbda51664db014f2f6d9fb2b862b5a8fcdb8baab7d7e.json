{"ast":null,"code":"import \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport HelloWorld from './App.vue'; // Import HelloWorld.vue\n\nexport default {\n  components: {\n    HelloWorld // Register HelloWorld component\n  },\n  data() {\n    return {\n      status: null,\n      result: null,\n      resultImageURL: null,\n      imageFile: null\n    };\n  },\n  computed: {\n    imageFileURL() {\n      return URL.createObjectURL(this.imageFile);\n    }\n  },\n  methods: {\n    handleImageUpload(event) {\n      this.status = null;\n      this.result = null;\n      this.resultImageURL = null;\n      const input = event.target;\n      this.imageFile = input.files[0];\n    },\n    async uploadImage() {\n      if (!this.imageFile) {\n        this.status = \"Please select an image file.\";\n        return;\n      }\n\n      // Convert the image to base64 before sending\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        this.sendImageToBackend(reader.result);\n      };\n      reader.readAsDataURL(this.imageFile);\n    },\n    async sendImageToBackend(imageData) {\n      const formData = new FormData();\n      formData.append(\"image\", imageData);\n      try {\n        const response = await fetch(\"http://127.0.0.1:5000/upload\", {\n          method: \"POST\",\n          body: formData\n        });\n        if (response.ok) {\n          this.status = \"Image upload successful!\";\n          const resultData = await response.json();\n          this.result = resultData;\n          this.drawLandmarks();\n        } else {\n          this.status = \"Image upload failed. Please try again.\";\n        }\n      } catch (error) {\n        console.error(\"Error uploading image:\", error);\n        this.status = \"Image upload failed. Please try again.\";\n      }\n    },\n    async showResult() {\n      // Fetch the result image from the backend and display it\n      try {\n        const response = await fetch(\"http://127.0.0.1:5000/result\");\n        if (response.ok) {\n          const resultImageData = await response.blob();\n          this.resultImageURL = URL.createObjectURL(resultImageData);\n        } else {\n          console.error(\"Error fetching result image\");\n        }\n      } catch (error) {\n        console.error(\"Error fetching result image:\", error);\n      }\n    },\n    drawLandmarks() {\n      // Add code to draw facial landmarks on the canvas if needed\n    }\n  }\n};","map":{"version":3,"names":["HelloWorld","components","data","status","result","resultImageURL","imageFile","computed","imageFileURL","URL","createObjectURL","methods","handleImageUpload","event","input","target","files","uploadImage","reader","FileReader","onloadend","sendImageToBackend","readAsDataURL","imageData","formData","FormData","append","response","fetch","method","body","ok","resultData","json","drawLandmarks","error","console","showResult","resultImageData","blob"],"sources":["/home/waseem/experiments/waseem-example-fullstack/client-/src/App.vue"],"sourcesContent":["<template>\n  <div id=\"facial-landmark-detection\">\n    <header>\n      <h1>Facial Landmark Detection</h1>\n    </header>\n\n    <main>\n      <!-- HelloWorld component at the top -->\n      <HelloWorld />\n\n      <!-- Green layer with white background -->\n      <div class=\"green-layer\">\n        <table>\n          <tr>\n            <td>\n              <!-- Rectangle box to display the image (shorter size) -->\n              <div class=\"image-box-short\">\n                <img v-if=\"imageFile\" :src=\"imageFileURL\" alt=\"Uploaded Image\" />\n              </div>\n              <input type=\"file\" accept=\".jpg\" @change=\"handleImageUpload\" />\n            </td>\n            <td>\n              <!-- Properly arranged Upload button -->\n              <button @click=\"uploadImage\">Upload</button>\n            </td>\n          </tr>\n        </table>\n\n        <div v-if=\"status !== null\" class=\"status\">\n          {{ status }}\n        </div>\n\n        <!-- Result button -->\n        <button v-if=\"result\" @click=\"showResult\">Show Result</button>\n\n        <!-- Result canvas -->\n        <canvas v-if=\"result\" ref=\"outputCanvas\" width=\"400\" height=\"300\"></canvas>\n        <img v-if=\"resultImageURL\" :src=\"resultImageURL\" alt=\"Result Image\" />\n      </div>\n    </main>\n\n    <footer>\n      <p>&copy; 2024 Facial Landmark Detection</p>\n    </footer>\n  </div>\n</template>\n\n<script>\nimport HelloWorld from './App.vue'; // Import HelloWorld.vue\n\nexport default {\n  components: {\n    HelloWorld, // Register HelloWorld component\n  },\n  data() {\n    return {\n      status: null,\n      result: null,\n      resultImageURL: null,\n      imageFile: null,\n    };\n  },\n  computed: {\n    imageFileURL() {\n      return URL.createObjectURL(this.imageFile);\n    },\n  },\n  methods: {\n    handleImageUpload(event) {\n      this.status = null;\n      this.result = null;\n      this.resultImageURL = null;\n      const input = event.target;\n      this.imageFile = input.files[0];\n    },\n    async uploadImage() {\n      if (!this.imageFile) {\n        this.status = \"Please select an image file.\";\n        return;\n      }\n\n      // Convert the image to base64 before sending\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        this.sendImageToBackend(reader.result);\n      };\n      reader.readAsDataURL(this.imageFile);\n    },\n    async sendImageToBackend(imageData) {\n      const formData = new FormData();\n      formData.append(\"image\", imageData);\n\n      try {\n        const response = await fetch(\"http://127.0.0.1:5000/upload\", {\n          method: \"POST\",\n          body: formData,\n        });\n\n        if (response.ok) {\n          this.status = \"Image upload successful!\";\n          const resultData = await response.json();\n          this.result = resultData;\n          this.drawLandmarks();\n        } else {\n          this.status = \"Image upload failed. Please try again.\";\n        }\n      } catch (error) {\n        console.error(\"Error uploading image:\", error);\n        this.status = \"Image upload failed. Please try again.\";\n      }\n    },\n    async showResult() {\n      // Fetch the result image from the backend and display it\n      try {\n        const response = await fetch(\"http://127.0.0.1:5000/result\");\n        if (response.ok) {\n          const resultImageData = await response.blob();\n          this.resultImageURL = URL.createObjectURL(resultImageData);\n        } else {\n          console.error(\"Error fetching result image\");\n        }\n      } catch (error) {\n        console.error(\"Error fetching result image:\", error);\n      }\n    },\n    drawLandmarks() {\n      // Add code to draw facial landmarks on the canvas if needed\n    },\n  },\n};\n</script>\n\n<style>\n/* Add your CSS styling here */\nheader {\n  background-color: #333;\n  color: #fff;\n  text-align: center;\n  padding: 10px;\n}\n\nfooter {\n  background-color: #333;\n  color: #fff;\n  text-align: center;\n  padding: 10px;\n  position: fixed;\n  bottom: 0;\n  width: 100%;\n}\n\nmain {\n  margin: 20px;\n}\n\ntable {\n  margin-bottom: 20px;\n}\n\n/* Green layer with white background */\n.green-layer {\n  background-color: white;\n  padding: 20px;\n  border: 2px solid green;\n  border-radius: 10px;\n}\n\n/* Rectangle box to display the image (shorter size) */\n.image-box-short {\n  border: 2px solid #ccc;\n  padding: 10px;\n  margin-bottom: 10px;\n  max-width: 300px;\n  max-height: 300px; /* Adjust the maximum height as needed */\n  overflow: hidden;\n}\n\n.status {\n  margin-top: 10px;\n  padding: 10px;\n  border: 1px solid #ccc;\n  background-color: #f0f0f0;\n}\n</style>"],"mappings":";;;AAgDA,OAAOA,UAAS,MAAO,WAAW,EAAE;;AAEpC,eAAe;EACbC,UAAU,EAAE;IACVD,UAAU,CAAE;EACd,CAAC;EACDE,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,MAAM,EAAE,IAAI;MACZC,MAAM,EAAE,IAAI;MACZC,cAAc,EAAE,IAAI;MACpBC,SAAS,EAAE;IACb,CAAC;EACH,CAAC;EACDC,QAAQ,EAAE;IACRC,YAAYA,CAAA,EAAG;MACb,OAAOC,GAAG,CAACC,eAAe,CAAC,IAAI,CAACJ,SAAS,CAAC;IAC5C;EACF,CAAC;EACDK,OAAO,EAAE;IACPC,iBAAiBA,CAACC,KAAK,EAAE;MACvB,IAAI,CAACV,MAAK,GAAI,IAAI;MAClB,IAAI,CAACC,MAAK,GAAI,IAAI;MAClB,IAAI,CAACC,cAAa,GAAI,IAAI;MAC1B,MAAMS,KAAI,GAAID,KAAK,CAACE,MAAM;MAC1B,IAAI,CAACT,SAAQ,GAAIQ,KAAK,CAACE,KAAK,CAAC,CAAC,CAAC;IACjC,CAAC;IACD,MAAMC,WAAWA,CAAA,EAAG;MAClB,IAAI,CAAC,IAAI,CAACX,SAAS,EAAE;QACnB,IAAI,CAACH,MAAK,GAAI,8BAA8B;QAC5C;MACF;;MAEA;MACA,MAAMe,MAAK,GAAI,IAAIC,UAAU,CAAC,CAAC;MAC/BD,MAAM,CAACE,SAAQ,GAAI,MAAM;QACvB,IAAI,CAACC,kBAAkB,CAACH,MAAM,CAACd,MAAM,CAAC;MACxC,CAAC;MACDc,MAAM,CAACI,aAAa,CAAC,IAAI,CAAChB,SAAS,CAAC;IACtC,CAAC;IACD,MAAMe,kBAAkBA,CAACE,SAAS,EAAE;MAClC,MAAMC,QAAO,GAAI,IAAIC,QAAQ,CAAC,CAAC;MAC/BD,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAEH,SAAS,CAAC;MAEnC,IAAI;QACF,MAAMI,QAAO,GAAI,MAAMC,KAAK,CAAC,8BAA8B,EAAE;UAC3DC,MAAM,EAAE,MAAM;UACdC,IAAI,EAAEN;QACR,CAAC,CAAC;QAEF,IAAIG,QAAQ,CAACI,EAAE,EAAE;UACf,IAAI,CAAC5B,MAAK,GAAI,0BAA0B;UACxC,MAAM6B,UAAS,GAAI,MAAML,QAAQ,CAACM,IAAI,CAAC,CAAC;UACxC,IAAI,CAAC7B,MAAK,GAAI4B,UAAU;UACxB,IAAI,CAACE,aAAa,CAAC,CAAC;QACtB,OAAO;UACL,IAAI,CAAC/B,MAAK,GAAI,wCAAwC;QACxD;MACF,EAAE,OAAOgC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;QAC9C,IAAI,CAAChC,MAAK,GAAI,wCAAwC;MACxD;IACF,CAAC;IACD,MAAMkC,UAAUA,CAAA,EAAG;MACjB;MACA,IAAI;QACF,MAAMV,QAAO,GAAI,MAAMC,KAAK,CAAC,8BAA8B,CAAC;QAC5D,IAAID,QAAQ,CAACI,EAAE,EAAE;UACf,MAAMO,eAAc,GAAI,MAAMX,QAAQ,CAACY,IAAI,CAAC,CAAC;UAC7C,IAAI,CAAClC,cAAa,GAAII,GAAG,CAACC,eAAe,CAAC4B,eAAe,CAAC;QAC5D,OAAO;UACLF,OAAO,CAACD,KAAK,CAAC,6BAA6B,CAAC;QAC9C;MACF,EAAE,OAAOA,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;MACtD;IACF,CAAC;IACDD,aAAaA,CAAA,EAAG;MACd;IAAA;EAEJ;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}